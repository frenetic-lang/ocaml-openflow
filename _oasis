OASISFormat: 0.3
OCamlVersion:     >= 4.01.0
Name:        openflow
Version:     0.2.0
Synopsis:    Serialization library for OpenFlow
Authors:     https://github.com/frenetic-lang/ocaml-openflow/contributors
License:     LGPL
Plugins:     META (0.3)
BuildTools:
  ocamlbuild

Flag quickcheck
    Description: build the openflow.quickcheck library
    Default: false

Flag lwt
    Description: build the openflow.lwt library
    Default: false

Flag end_test
     Description: install executable for end-to-end test
     Default: false

Flag async
    Description: build the openflow.async library
    Default: false

Library openflow
  Path: lib
  BuildDepends:
    str,
    cstruct,
    cstruct.syntax,
    packet,
    core,
    sexplib.syntax,
    threads
  InternalModules:
    Bits,
    Misc,
    ModComposition,
    GroupTable0x04,
    SDN_OpenFlow0x01,
    SDN_OpenFlow0x04,
    HighLevelSwitch_common    
  Modules:
    VInt,
    OpenFlow_Header,
    OpenFlow0x01,
    OpenFlow0x01_Core,
    OpenFlow0x01_Stats,
    OpenFlow0x04,
    OpenFlow0x04_Core,
    SDN_Types    

Library async
  Findlibparent: openflow
  Findlibname: async
  Path: async
  Build$: flag(async)
  BuildDepends:
    async,
    openflow,
    cstruct.async,
    threads,
    textutils,
    sexplib.syntax
  InternalModules:
    Async_OpenFlow_Log,
    Async_OpenFlow_Message,
    Async_OpenFlow_Platform,
    Async_OpenFlow_ClientServer,
    Async_OpenFlow0x01,
    Async_OpenFlow0x04,
    Async_OpenFlowChunk,
    Async_Highlevel
  Modules:
    Async_OpenFlow


Library lwt
  Findlibparent: openflow
  Findlibname: lwt
  Path: lwt
  Build$: flag(lwt)
  BuildDepends:
    lwt,
    lwt.unix,
    lwt.syntax,
    openflow
  InternalModules:
    HighLevelSwitch,
    HighLevelSwitch0x01,
    HighLevelSwitch0x04
  Modules:
    OpenFlow0x01_Platform,
    OpenFlow0x04_Platform,
    OpenFlow0x01_Switch,
    OpenFlow0x04_Switch,
    OpenFlow0x01_TxSwitch,
    OpenFlow0x04_TxSwitch,    
    OpenFlow0x04_Misc,
    Socket,
    SDN

Library quickcheck
    Findlibparent: openflow
    Findlibname: quickcheck
    Path: quickcheck
    Build$: flag(tests) || flag(quickcheck)
    BuildDepends:
        quickcheck,
        openflow
    Modules:
        OpenFlow_Arbitrary,
        OpenFlow0x01_Arbitrary

Executable testtool
  Path: test
  Install: false
  Build$: flag(tests)
  MainIs: Test.ml
  BuildDepends:
    packet,
    openflow,
    oUnit,
    pa_ounit,
    pa_ounit.syntax,
    openflow,
    openflow.quickcheck,
    quickcheck

Executable ping_test
  Path: test
  Install: false
  Build$: flag(end_test) && flag(lwt)
  MainIs: PingTest.ml
  BuildDepends: packet,openflow,openflow.lwt,oUnit,pa_ounit,pa_ounit.syntax

Test all_tests
  Command: $testtool inline-test-runner openflow
  Run$:  flag(quickcheck) && flag(tests)
  TestTools: testtool

Executable Hypervisor
  Path: examples
  MainIs: Hypervisor.ml
  Build$: flag(async)
  Install: false
  BuildDepends:
    threads,
    core,
    async,
    packet,
    cstruct.async,
    openflow,
    openflow.async

Executable learning_switch
  Path: examples
  MainIs: Learning_Switch.ml
  Build$: flag(async)
  Install: false
  BuildDepends:
    threads,
    core,
    async,
    packet,
    cstruct.async,
    openflow,
    openflow.async
